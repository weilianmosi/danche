{"ast":null,"code":"import \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\\\u5355\\u8F66\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\\u5F00\\u53D1\\\\imoocmanager\\\\src\\\\pages\\\\user\\\\index.js\";\nimport React from 'react';\nimport axios from './../../axios/index.js';\nimport Utils from './../../utils/utils.js';\nimport ETable from './../../components/ETable';\nimport BaseForm from '../../components/BaseForm/index.js';\nimport moment from 'moment';\nconst FormItem = _Form.Item;\nconst RadioGroup = _Radio.Group;\nconst TextArea = _Input.TextArea;\nconst Option = _Select.Option;\nexport default class User extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isVisible: false\n    };\n    this.params = {\n      page: 1\n    };\n    this.formList = [{\n      type: 'INPUT',\n      label: '用户名',\n      field: 'user_name',\n      placeholder: '请输入用户名',\n      width: 120\n    }, {\n      type: 'INPUT',\n      label: '用户手机号',\n      field: 'user_mobile',\n      placeholder: '请输入用户手机号',\n      width: 140\n    }, {\n      type: 'DATE',\n      label: '请选择入职日期',\n      field: 'user_date',\n      placeholder: '请输入日期'\n    }];\n\n    this.handleFilter = params => {\n      this.params = params;\n      this.requestList();\n    };\n\n    this.handleOperate = type => {\n      let item = this.state.selectedItem;\n\n      if (type == 'create') {\n        this.setState({\n          type,\n          isVisible: true,\n          title: '创建员工'\n        });\n      } else if (type == 'edit') {\n        if (!item) {\n          _Modal.info({\n            title: '提示',\n            content: '请选择一个用户'\n          });\n\n          return;\n        }\n\n        this.setState({\n          type,\n          isVisible: true,\n          title: '编辑员工',\n          userInfo: item\n        });\n      } else if (type == 'detail') {\n        this.setState({\n          type,\n          isVisible: true,\n          title: '员工详情',\n          userInfo: item\n        });\n      } else {\n        if (!item) {\n          _Modal.info({\n            title: '提示',\n            content: '请选择一个用户'\n          });\n\n          return;\n        }\n\n        let _this = this;\n\n        _Modal.confirm({\n          title: '确认删除',\n          content: '是否删除当前员工',\n\n          onOk() {\n            axios.ajax({\n              url: '/user/delete',\n              data: {\n                params: {\n                  id: item.id\n                }\n              }\n            }).then(res => {\n              if (res.code == 0) {\n                _this.setState({\n                  isVisible: false\n                });\n\n                _this.requestList();\n              }\n            });\n          }\n\n        });\n      }\n    };\n\n    this.handleSubmit = () => {\n      let type = this.state.type;\n      let data = this.userForm.props.form.getFieldsValue();\n      axios.ajax({\n        url: type == 'create' ? '/user/add' : '/user/edit',\n        data: {\n          params: data\n        }\n      }).then(res => {\n        if (res.code == 0) {\n          this.setState({\n            isVisible: false\n          });\n          this.userForm.props.form.resetFields();\n          this.requestList();\n        }\n      });\n    };\n\n    this.requestList = () => {\n      axios.requestList(this, '/user/list', this.params);\n    };\n  }\n\n  componentDidMount() {\n    this.requestList();\n  }\n\n  render() {\n    const columns = [{\n      title: 'id',\n      dataIndex: 'id'\n    }, {\n      title: '用户名',\n      dataIndex: 'username'\n    }, {\n      title: '性别',\n      dataIndex: 'sex',\n\n      render(sex) {\n        return sex == 1 ? '男' : '女';\n      }\n\n    }, {\n      title: '状态',\n      dataIndex: 'state',\n\n      render(state) {\n        return {\n          '1': '初中',\n          '2': '高中',\n          '3': '大学',\n          '4': '硕士',\n          '5': '博士'\n        }[state];\n      }\n\n    }, {\n      title: '爱好',\n      dataIndex: 'interest',\n\n      render(interest) {\n        return {\n          '1': '游泳',\n          '2': '篮球',\n          '3': '爬山',\n          '4': '足球',\n          '5': '排球',\n          '6': '乒乓',\n          '7': '唱歌',\n          '8': '骑行'\n        }[interest];\n      }\n\n    }, {\n      title: '生日',\n      dataIndex: 'birthday'\n    }, {\n      title: '联系地址',\n      dataIndex: 'address'\n    }, {\n      title: '早起时间',\n      dataIndex: 'time'\n    }];\n    var footer = {};\n\n    if (this.state.type == 'detail') {\n      footer = {\n        footer: null\n      };\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(_Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(BaseForm, {\n      formList: this.formList,\n      filterSubmit: this.handleFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    })), React.createElement(_Card, {\n      style: {\n        marginTop: 10\n      },\n      className: \"operate-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      icon: \"plus\",\n      onClick: () => this.handleOperate('create'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"\\u521B\\u5EFA\\u5458\\u5DE5\"), React.createElement(_Button, {\n      type: \"primary\",\n      icon: \"edit\",\n      onClick: () => this.handleOperate('edit'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"\\u7F16\\u8F91\\u5458\\u5DE5\"), React.createElement(_Button, {\n      type: \"primary\",\n      onClick: () => this.handleOperate('detail'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"\\u5458\\u5DE5\\u8BE6\\u60C5\"), React.createElement(_Button, {\n      type: \"primary\",\n      icon: \"delete\",\n      onClick: () => this.handleOperate('delete'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"\\u5220\\u9664\\u5458\\u5DE5\")), React.createElement(\"div\", {\n      className: \"content-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(ETable, {\n      updateSelectedItem: Utils.updateSelectedItem.bind(this),\n      columns: columns,\n      dataSource: this.state.list,\n      selectedRowKeys: this.state.selectedRowKeys,\n      selectedItem: this.state.selectedItem,\n      pagination: this.state.pagination,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    })), React.createElement(_Modal, Object.assign({\n      title: this.state.title,\n      visible: this.state.isVisible,\n      onOk: this.handleSubmit,\n      onCancel: () => {\n        this.userForm.props.form.resetFields();\n        this.setState({\n          isVisible: false\n        });\n      },\n      width: 600\n    }, footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), React.createElement(UserForm, {\n      type: this.state.type,\n      userInfo: this.state.userInfo,\n      wrappedComponentRef: inst => {\n        this.userForm = inst;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass UserForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getState = state => {\n      return {\n        '1': '初中',\n        '2': '高中',\n        '3': '大学',\n        '4': '硕士',\n        '5': '博士'\n      }[state];\n    };\n  }\n\n  render() {\n    let type = this.props.type;\n    let userInfo = this.props.userInfo || {};\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const formTtemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 15\n      }\n    };\n    return React.createElement(_Form, {\n      layout: \"horizontal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(FormItem, Object.assign({\n      label: \"\\u7528\\u6237\\u540D\"\n    }, formTtemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), type == 'detail' ? userInfo.username : getFieldDecorator('user_name', {\n      initialValue: userInfo.username\n    })(React.createElement(_Input, {\n      type: \"text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }))), React.createElement(FormItem, Object.assign({\n      label: \"\\u6027\\u522B\"\n    }, formTtemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }), type == 'detail' ? userInfo.sex == 1 ? '男' : '女' : getFieldDecorator('sex', {\n      initialValue: userInfo.sex\n    })(React.createElement(RadioGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(_Radio, {\n      value: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"\\u7537\"), React.createElement(_Radio, {\n      value: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, \"\\u5973\")))), React.createElement(FormItem, Object.assign({\n      label: \"\\u72B6\\u6001\"\n    }, formTtemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }), type == 'detail' ? this.getState(userInfo.state) : getFieldDecorator('state', {\n      initialValue: userInfo.state\n    })(React.createElement(_Select, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \"\\u521D\\u4E2D\"), React.createElement(Option, {\n      value: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"\\u9AD8\\u4E2D\"), React.createElement(Option, {\n      value: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, \"\\u5927\\u5B66\"), React.createElement(Option, {\n      value: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \"\\u7855\\u58EB\"), React.createElement(Option, {\n      value: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"\\u535A\\u58EB\")))), React.createElement(FormItem, Object.assign({\n      label: \"\\u751F\\u65E5\"\n    }, formTtemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }), type == 'detail' ? userInfo.birthday : getFieldDecorator('birthday', {\n      initialValue: moment(userInfo.birthday)\n    })(React.createElement(_DatePicker, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }))), React.createElement(FormItem, Object.assign({\n      label: \"\\u8054\\u7CFB\\u5730\\u5740\"\n    }, formTtemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }), type == 'detail' ? userInfo.address : getFieldDecorator('address', {\n      initialValue: userInfo.address\n    })(React.createElement(TextArea, {\n      rows: 3,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u8054\\u7CFB\\u5730\\u5740\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nUserForm = _Form.create({})(UserForm);","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\单车后台管理系统开发\\imoocmanager\\src\\pages\\user\\index.js"],"names":["React","axios","Utils","ETable","BaseForm","moment","FormItem","Item","RadioGroup","Group","TextArea","Option","User","Component","state","isVisible","params","page","formList","type","label","field","placeholder","width","handleFilter","requestList","handleOperate","item","selectedItem","setState","title","info","content","userInfo","_this","confirm","onOk","ajax","url","data","id","then","res","code","handleSubmit","userForm","props","form","getFieldsValue","resetFields","componentDidMount","render","columns","dataIndex","sex","interest","footer","marginTop","updateSelectedItem","bind","list","selectedRowKeys","pagination","inst","UserForm","getState","getFieldDecorator","formTtemLayout","labelCol","span","wrapperCol","username","initialValue","birthday","address","create"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Card,Button,Modal,Form,Input,Radio,DatePicker,Select} from 'antd'\r\nimport axios from './../../axios/index.js'\r\nimport Utils from './../../utils/utils.js'\r\nimport ETable from './../../components/ETable'\r\nimport BaseForm from '../../components/BaseForm/index.js';\r\nimport moment from 'moment'\r\nconst FormItem = Form.Item\r\nconst RadioGroup = Radio.Group\r\nconst TextArea = Input.TextArea\r\nconst Option = Select.Option\r\nexport default class User extends React.Component{\r\n  \r\n  componentDidMount() {\r\n    this.requestList()\r\n  }\r\n  state = {\r\n    isVisible: false\r\n  }\r\n  params = {\r\n    page:1\r\n  }\r\n  formList = [\r\n    {\r\n      type:'INPUT',\r\n      label:'用户名',\r\n      field:'user_name',\r\n      placeholder:'请输入用户名',\r\n      width:120,\r\n    },\r\n    {\r\n      type:'INPUT',\r\n      label:'用户手机号',\r\n      field:'user_mobile',\r\n      placeholder:'请输入用户手机号',\r\n      width:140,\r\n    },\r\n    {\r\n      type:'DATE',\r\n      label:'请选择入职日期',\r\n      field:'user_date',\r\n      placeholder:'请输入日期',\r\n    },\r\n  ]\r\n  handleFilter = (params) => {\r\n    this.params = params\r\n    this.requestList()\r\n  }\r\n  // 功能区操作\r\n  handleOperate = (type) => {\r\n    let item = this.state.selectedItem\r\n    if(type == 'create') {\r\n      this.setState({\r\n        type,\r\n        isVisible: true,\r\n        title: '创建员工'\r\n      })\r\n    } else if(type == 'edit') {\r\n      if(!item) {\r\n        Modal.info({\r\n          title: '提示',\r\n          content: '请选择一个用户'\r\n        })\r\n        return\r\n      }\r\n      this.setState({\r\n        type,\r\n        isVisible: true,\r\n        title: '编辑员工',\r\n        userInfo: item\r\n      })\r\n    } else if(type == 'detail') {\r\n      this.setState({\r\n        type,\r\n        isVisible: true,\r\n        title: '员工详情',\r\n        userInfo: item\r\n      })\r\n    } else {\r\n      if(!item) {\r\n        Modal.info({\r\n          title: '提示',\r\n          content: '请选择一个用户'\r\n        })\r\n        return\r\n      }\r\n      let _this = this\r\n      Modal.confirm({\r\n        title: '确认删除',\r\n        content: '是否删除当前员工',\r\n        onOk() {\r\n          axios.ajax({\r\n            url: '/user/delete',\r\n            data: {\r\n              params: {\r\n                id: item.id\r\n              }\r\n            }\r\n          }).then((res) => {\r\n            if(res.code == 0) {\r\n              _this.setState({\r\n                isVisible: false\r\n              })\r\n              _this.requestList()\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n  // 创建员工提交\r\n  handleSubmit = () => {\r\n    let type = this.state.type\r\n    let data = this.userForm.props.form.getFieldsValue()\r\n    axios.ajax({\r\n      url: type == 'create'?'/user/add':'/user/edit',\r\n      data: {\r\n        params: data\r\n      }\r\n    }).then((res) => {\r\n      if(res.code == 0) {\r\n        this.setState({\r\n          isVisible:false\r\n        })\r\n        this.userForm.props.form.resetFields()\r\n        this.requestList()\r\n      }\r\n    })\r\n  }\r\n  requestList = () => {\r\n    axios.requestList(this,'/user/list',this.params)\r\n  }\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title:'id',\r\n        dataIndex:'id'\r\n      },\r\n      {\r\n        title:'用户名',\r\n        dataIndex:'username'\r\n      },\r\n      {\r\n        title:'性别',\r\n        dataIndex:'sex',\r\n        render(sex) {\r\n          return sex == 1 ? '男' : '女'\r\n        }\r\n      },\r\n      {\r\n        title:'状态',\r\n        dataIndex:'state',\r\n        render(state) {\r\n          return {\r\n            '1': '初中',\r\n            '2': '高中',\r\n            '3': '大学',\r\n            '4': '硕士',\r\n            '5': '博士',\r\n          }[state]\r\n        }\r\n      },\r\n      {\r\n        title:'爱好',\r\n        dataIndex:'interest',\r\n        render(interest) {\r\n          return {\r\n            '1': '游泳',\r\n            '2': '篮球',\r\n            '3': '爬山',\r\n            '4': '足球',\r\n            '5': '排球',\r\n            '6': '乒乓',\r\n            '7': '唱歌',\r\n            '8': '骑行',\r\n          }[interest]\r\n        }\r\n      },\r\n      {\r\n        title:'生日',\r\n        dataIndex:'birthday'\r\n      },\r\n      {\r\n        title:'联系地址',\r\n        dataIndex:'address'\r\n      },{\r\n        title:'早起时间',\r\n        dataIndex:'time'\r\n      },\r\n    ]\r\n      var footer = {}\r\n        if(this.state.type == 'detail') {\r\n          footer = {\r\n            footer: null\r\n          }\r\n        }\r\n    return(\r\n      <div>\r\n        <Card>\r\n          <BaseForm formList={this.formList} filterSubmit={this.handleFilter}/>\r\n        </Card>\r\n        <Card style={{marginTop:10}} className=\"operate-wrap\">\r\n          <Button type=\"primary\" icon=\"plus\"   onClick={() => this.handleOperate('create')}>创建员工</Button>\r\n          <Button type=\"primary\" icon=\"edit\"   onClick={() => this.handleOperate('edit')}>编辑员工</Button>\r\n          <Button type=\"primary\"               onClick={() => this.handleOperate('detail')}>员工详情</Button>\r\n          <Button type=\"primary\" icon=\"delete\" onClick={() => this.handleOperate('delete')}>删除员工</Button>\r\n        </Card>\r\n        <div className=\"content-wrap\">\r\n          <ETable \r\n            updateSelectedItem={Utils.updateSelectedItem.bind(this)}\r\n            columns={columns}\r\n            dataSource={this.state.list}\r\n            selectedRowKeys={this.state.selectedRowKeys}\r\n            selectedItem={this.state.selectedItem}\r\n            pagination={this.state.pagination}\r\n          />\r\n        </div>\r\n        <Modal \r\n          title={this.state.title}\r\n          visible={this.state.isVisible}\r\n          onOk={this.handleSubmit}\r\n          onCancel={() => {\r\n            this.userForm.props.form.resetFields()\r\n            this.setState({\r\n              isVisible: false, \r\n            })\r\n          }}\r\n          width={600}\r\n          {...footer}\r\n        >\r\n          <UserForm \r\n            type={this.state.type} \r\n            userInfo={this.state.userInfo}\r\n            wrappedComponentRef={(inst) => {this.userForm = inst}}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass UserForm extends React.Component {\r\n\r\n  getState = (state) => {\r\n    return {\r\n      '1': '初中',\r\n      '2': '高中',\r\n      '3': '大学',\r\n      '4': '硕士',\r\n      '5': '博士',\r\n    }[state]\r\n  }\r\n  render() {\r\n    let type = this.props.type\r\n    let userInfo = this.props.userInfo || {}\r\n    const { getFieldDecorator } = this.props.form\r\n    const formTtemLayout = {\r\n      labelCol: {span:5},\r\n      wrapperCol: {span: 15}\r\n    }\r\n    return(\r\n      <Form layout=\"horizontal\">\r\n        <FormItem label=\"用户名\" {...formTtemLayout}>\r\n          {\r\n            type == 'detail' ? userInfo.username :\r\n            getFieldDecorator('user_name',{\r\n              initialValue: userInfo.username\r\n            })(\r\n              <Input type=\"text\" placeholder=\"请输入用户名\"/>\r\n            )\r\n          }\r\n        </FormItem>\r\n        <FormItem label=\"性别\" {...formTtemLayout}>\r\n          {\r\n            type == 'detail' ? (userInfo.sex == 1 ? '男' : '女') :\r\n            getFieldDecorator('sex',{\r\n              initialValue: userInfo.sex\r\n            })(\r\n              <RadioGroup>\r\n                <Radio value={1}>男</Radio>\r\n                <Radio value={2}>女</Radio>\r\n              </RadioGroup>\r\n            )\r\n          }\r\n        </FormItem>\r\n        <FormItem label=\"状态\" {...formTtemLayout}>\r\n          {\r\n            type == 'detail' ? this.getState(userInfo.state) :\r\n            getFieldDecorator('state',{\r\n              initialValue: userInfo.state\r\n            })(\r\n              <Select>\r\n                <Option value={1}>初中</Option>\r\n                <Option value={2}>高中</Option>\r\n                <Option value={3}>大学</Option>\r\n                <Option value={4}>硕士</Option>\r\n                <Option value={5}>博士</Option>\r\n              </Select>\r\n            )\r\n          }\r\n        </FormItem>\r\n        <FormItem label=\"生日\" {...formTtemLayout}>\r\n          {\r\n            type == 'detail' ? userInfo.birthday :\r\n            getFieldDecorator('birthday',{\r\n              initialValue: moment(userInfo.birthday)\r\n            })(\r\n              <DatePicker />\r\n            )\r\n          }\r\n        </FormItem>\r\n        <FormItem label=\"联系地址\" {...formTtemLayout}>\r\n          {\r\n            type == 'detail' ? userInfo.address :\r\n            getFieldDecorator('address',{\r\n              initialValue: userInfo.address\r\n            })(\r\n              <TextArea rows={3} placeholder=\"请输入联系地址\" />\r\n            )\r\n          }\r\n        </FormItem>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\nUserForm = Form.create({})(UserForm)"]},"metadata":{},"sourceType":"module"}