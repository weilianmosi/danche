{"ast":null,"code":"import \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\\\u5355\\u8F66\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\\u5F00\\u53D1\\\\imoocmanager\\\\src\\\\pages\\\\order\\\\detail.js\";\nimport React from 'react';\nimport axios from '../../axios';\nimport Utils from '../../utils/utils';\nimport './detail.less';\nconst FormItem = _Form.Item;\nconst Option = _Select.Option;\nexport default class Order extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n\n    this.getDetailInfo = orderId => {\n      axios.ajax({\n        url: '/order/detail',\n        data: {\n          params: {\n            orderId: orderId\n          }\n        }\n      }).then(res => {\n        if (res.code == 0) {\n          this.setState({\n            orderInfo: res.result\n          });\n          this.renderMap(res.result);\n        }\n      });\n    };\n\n    this.renderMap = result => {\n      this.map = new window.BMap.Map('orderDetailMap');\n      this.map.centerAndZoom('北京', 11); // 添加地图控件\n\n      this.addMapControl(); // 调用路线图绘制方法\n\n      this.drawBikeRoute(result.position_list); // 调用服务区绘制方法\n\n      this.drawServiceArea(result.area);\n    };\n\n    this.addMapControl = () => {\n      let map = this.map;\n      map.addControl(new window.BMap.ScaleControl({\n        anchor: window.BMap_ANCHOR_TOP_RIGHT\n      }));\n      map.addControl(new window.BMap.NavigationControl({\n        anchor: window.BMap_ANCHOR_TOP_RIGHT\n      }));\n    };\n\n    this.drawBikeRoute = positionList => {\n      let map = this.map;\n      let startPoint = '';\n      let endPoint = '';\n\n      if (positionList.length > 0) {\n        let first = positionList[0];\n        let last = positionList[positionList.length - 1];\n        startPoint = new window.BMap.Point(first.lon, first.lat);\n        let startIcon = new window.BMap.Icon('/assets/start_point.png', new window.BMap.Size(36, 42), {\n          imageSize: new window.BMap.Size(36, 42),\n          anchor: new window.BMap.Size(36, 42)\n        });\n        let startMarker = new window.BMap.Marker(startPoint, {\n          icon: startIcon\n        });\n        this.map.addOverlay(startMarker);\n        endPoint = new window.BMap.Point(last.lon, last.lat);\n        let endIcon = new window.BMap.Icon('/assets/end_point.png', new window.BMap.Size(36, 42), {\n          imageSize: new window.BMap.Size(36, 42),\n          anchor: new window.BMap.Size(36, 42)\n        });\n        let endMarker = new window.BMap.Marker(endPoint, {\n          icon: endIcon\n        });\n        this.map.addOverlay(endMarker); // 连接路线图\n\n        let trackPoint = [];\n\n        for (let i = 0; i < positionList.length; i++) {\n          let point = positionList[i];\n          trackPoint.push(new window.BMap.Point(point.lon, point.lat));\n        }\n\n        let polyline = new window.BMap.Polyline(trackPoint, {\n          strokeColor: '#1869ad',\n          strokeWeight: 3,\n          strokeOpacity: 1\n        });\n        this.map.addOverlay(polyline);\n        this.map.centerAndZoom(endPoint, 11);\n      }\n    };\n\n    this.drawServiceArea = positionList => {\n      let trackPoint = [];\n\n      for (let i = 0; i < positionList.length; i++) {\n        let point = positionList[i];\n        trackPoint.push(new window.BMap.Point(point.lon, point.lat));\n      }\n\n      let polygon = new window.BMap.Polygon(trackPoint, {\n        strokeColor: '#ce0000',\n        strokeWeight: 4,\n        strokeOpacity: 1,\n        fillColor: '#ff8605',\n        fillOpacity: 0.2\n      });\n      this.map.addOverlay(polygon);\n    };\n  }\n\n  componentDidMount() {\n    let orderId = this.props.match.params.orderId;\n\n    if (orderId) {\n      this.getDetailInfo(orderId);\n    }\n  }\n\n  render() {\n    const info = this.state.orderInfo || {};\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(_Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"orderDetailMap\",\n      className: \"order-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\\u57FA\\u7840\\u4FE1\\u606F\"), React.createElement(\"ul\", {\n      className: \"detail-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"\\u7528\\u8F66\\u6A21\\u5F0F\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, info.mode == 1 ? '服务区' : '停车点')), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"\\u8BA2\\u5355\\u7F16\\u53F7\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, info.order_sn)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"\\u8F66\\u8F86\\u7F16\\u53F7\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, info.bike_sn)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"\\u7528\\u6237\\u59D3\\u540D\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, info.user_name)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"\\u624B\\u673A\\u53F7\\u7801\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, info.mobile)))), React.createElement(\"div\", {\n      className: \"detail-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"\\u884C\\u9A76\\u8F68\\u8FF9\"), React.createElement(\"ul\", {\n      className: \"detail-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"\\u884C\\u7A0B\\u8D77\\u70B9\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, info.start_location)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"\\u884C\\u7A0B\\u7EC8\\u70B9\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, info.end_location)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"\\u884C\\u9A76\\u91CC\\u7A0B\"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, info.distance / 1000, \"\\u516C\\u91CC\"))))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\单车后台管理系统开发\\imoocmanager\\src\\pages\\order\\detail.js"],"names":["React","axios","Utils","FormItem","Item","Option","Order","Component","state","getDetailInfo","orderId","ajax","url","data","params","then","res","code","setState","orderInfo","result","renderMap","map","window","BMap","Map","centerAndZoom","addMapControl","drawBikeRoute","position_list","drawServiceArea","area","addControl","ScaleControl","anchor","BMap_ANCHOR_TOP_RIGHT","NavigationControl","positionList","startPoint","endPoint","length","first","last","Point","lon","lat","startIcon","Icon","Size","imageSize","startMarker","Marker","icon","addOverlay","endIcon","endMarker","trackPoint","i","point","push","polyline","Polyline","strokeColor","strokeWeight","strokeOpacity","polygon","Polygon","fillColor","fillOpacity","componentDidMount","props","match","render","info","mode","order_sn","bike_sn","user_name","mobile","start_location","end_location","distance"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Card, Form, Select, Modal, DatePicker, message} from 'antd'\r\nimport axios from '../../axios'\r\nimport Utils from '../../utils/utils'\r\nimport './detail.less'\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\nexport default class Order extends React.Component{\r\n\r\n  state = {\r\n\r\n  }\r\n  componentDidMount() {\r\n    let orderId = this.props.match.params.orderId\r\n    if(orderId) {\r\n      this.getDetailInfo(orderId)\r\n    }\r\n  }\r\n  getDetailInfo = (orderId) => {\r\n    axios.ajax({\r\n      url: '/order/detail',\r\n      data: {\r\n        params:{\r\n          orderId: orderId\r\n        }\r\n      }\r\n    }).then((res) => {\r\n      if(res.code == 0) {\r\n        this.setState({\r\n          orderInfo: res.result\r\n        })\r\n        this.renderMap(res.result)\r\n      }\r\n    })\r\n  }\r\n  renderMap = (result) => {\r\n    this.map = new window.BMap.Map('orderDetailMap')\r\n    this.map.centerAndZoom('北京',11)\r\n    // 添加地图控件\r\n    this.addMapControl()\r\n    // 调用路线图绘制方法\r\n    this.drawBikeRoute(result.position_list)\r\n    // 调用服务区绘制方法\r\n    this.drawServiceArea(result.area)\r\n  }\r\n  // 添加地图控件\r\n  addMapControl = () => {\r\n    let map = this.map \r\n    map.addControl(new window.BMap.ScaleControl({anchor: window.BMap_ANCHOR_TOP_RIGHT}))\r\n    map.addControl(new window.BMap.NavigationControl({anchor: window.BMap_ANCHOR_TOP_RIGHT}))\r\n\r\n  }\r\n  // 绘制用户的行驶路线\r\n  drawBikeRoute = (positionList) => {\r\n    let map = this.map\r\n    let startPoint = ''\r\n    let endPoint = ''\r\n    if(positionList.length > 0) {\r\n      let first = positionList[0]\r\n      let last = positionList[positionList.length-1]\r\n      startPoint = new window.BMap.Point(first.lon,first.lat)\r\n      let startIcon = new window.BMap.Icon('/assets/start_point.png',new window.BMap.Size(36,42),{\r\n        imageSize: new window.BMap.Size(36,42),\r\n        anchor: new window.BMap.Size(36,42),\r\n      })\r\n      let startMarker = new window.BMap.Marker(startPoint,{icon: startIcon})\r\n      this.map.addOverlay(startMarker)\r\n\r\n      endPoint = new window.BMap.Point(last.lon,last.lat)\r\n      let endIcon = new window.BMap.Icon('/assets/end_point.png',new window.BMap.Size(36,42),{\r\n        imageSize: new window.BMap.Size(36,42),\r\n        anchor: new window.BMap.Size(36,42),\r\n      })\r\n      let endMarker = new window.BMap.Marker(endPoint,{icon: endIcon})\r\n      this.map.addOverlay(endMarker)\r\n\r\n      // 连接路线图\r\n      let trackPoint = []\r\n      for(let i = 0; i < positionList.length; i++) {\r\n        let point = positionList[i]\r\n        trackPoint.push(new window.BMap.Point(point.lon, point.lat))\r\n      }\r\n      let polyline = new window.BMap.Polyline(trackPoint,{\r\n        strokeColor:'#1869ad',\r\n        strokeWeight: 3,\r\n        strokeOpacity: 1\r\n      })\r\n      this.map.addOverlay(polyline)\r\n      \r\n\r\n      \r\n      \r\n      this.map.centerAndZoom(endPoint,11)\r\n    } \r\n  }\r\n  // 绘制服务区\r\n  drawServiceArea = (positionList) => {\r\n    \r\n    let trackPoint = []\r\n      for(let i = 0; i < positionList.length; i++) {\r\n        let point = positionList[i]\r\n        trackPoint.push(new window.BMap.Point(point.lon, point.lat))\r\n      }\r\n    let polygon = new window.BMap.Polygon(trackPoint,{\r\n      strokeColor:'#ce0000',\r\n      strokeWeight: 4,\r\n      strokeOpacity: 1,\r\n      fillColor:'#ff8605',\r\n      fillOpacity: 0.2,\r\n    })\r\n    this.map.addOverlay(polygon)\r\n  }\r\n  render(){\r\n    const info = this.state.orderInfo || {}\r\n    return(\r\n      <div>\r\n        <Card>\r\n          <div id=\"orderDetailMap\" className=\"order-map\"></div>\r\n          <div className=\"detail-items\">\r\n            <div className=\"item-title\">基础信息</div>\r\n            <ul className=\"detail-form\">\r\n              <li>\r\n                <div className=\"detail-form-left\">用车模式</div>\r\n                <div className=\"detail-form-content\">{info.mode == 1 ? '服务区' : '停车点'}</div>\r\n              </li>\r\n              <li>\r\n                <div className=\"detail-form-left\">订单编号</div>\r\n                <div className=\"detail-form-content\">{info.order_sn}</div>\r\n              </li>\r\n              <li>\r\n                <div className=\"detail-form-left\">车辆编号</div>\r\n                <div className=\"detail-form-content\">{info.bike_sn}</div>\r\n              </li>\r\n              <li>\r\n                <div className=\"detail-form-left\">用户姓名</div>\r\n                <div className=\"detail-form-content\">{info.user_name}</div>\r\n              </li>\r\n              <li>\r\n                <div className=\"detail-form-left\">手机号码</div>\r\n                <div className=\"detail-form-content\">{info.mobile}</div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"detail-items\">\r\n            <div className=\"item-title\">行驶轨迹</div>\r\n            <ul className=\"detail-form\">\r\n              <li>\r\n                <div className=\"detail-form-left\">行程起点</div>\r\n                <div className=\"detail-form-content\">{info.start_location}</div>\r\n              </li>\r\n              <li>\r\n                <div className=\"detail-form-left\">行程终点</div>\r\n                <div className=\"detail-form-content\">{info.end_location}</div>\r\n              </li>\r\n              <li>\r\n                <div className=\"detail-form-left\">行驶里程</div>\r\n                <div className=\"detail-form-content\">{info.distance / 1000}公里</div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    ) \r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}